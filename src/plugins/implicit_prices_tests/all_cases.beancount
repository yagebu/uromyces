;==============================================================================
; all_cases
;==============================================================================

2013-01-01 open Assets:Account1
2013-01-01 open Assets:Account2
2013-01-01 open Assets:Other

2013-04-01 * "A transaction with a price conversion."
  Assets:Account1             150 USD @ 1.12 CAD
  Assets:Other

;; This should book at price at the cost.
2013-04-02 * "A transaction with a cost."
  Assets:Account1             1500 HOOL {520 USD}
  Assets:Other

;; This one should be IGNORED because it books against the above.
2013-04-03 * "A transaction with a cost that reduces an existing position"
  Assets:Account1            -500 HOOL {520 USD}
  Assets:Other

;; This one should generate the price, even if it is reducing.
2013-04-04 * "A transaction with a cost that reduces existing position, with price"
  Assets:Account1            -100 HOOL {520 USD} @ 530 USD
  Assets:Other

;; This is not reducing and should also book a price at cost.
2013-04-05 * "A transaction with another cost that is not reducing."
  Assets:Account1             500 HOOL {540 USD}
  Assets:Other

;; The price here overrides the cost and should create an entry.
2013-04-06 * "A transaction with a cost and a price."
  Assets:Account1             500 HOOL {540 USD} @ 560 USD
  Assets:Other

;------------------------------------------------------------------------------
; prices=[
;     "date=2013-04-01, currency=USD, price=1.12 CAD, meta=Meta([MetaKeyValuePair { key: \"__implicit_prices__\", value: Some(String(\"from_price\")) }])",
;     "date=2013-04-02, currency=HOOL, price=520 USD, meta=Meta([MetaKeyValuePair { key: \"__implicit_prices__\", value: Some(String(\"from_cost\")) }])",
;     "date=2013-04-04, currency=HOOL, price=530 USD, meta=Meta([MetaKeyValuePair { key: \"__implicit_prices__\", value: Some(String(\"from_price\")) }])",
;     "date=2013-04-05, currency=HOOL, price=540 USD, meta=Meta([MetaKeyValuePair { key: \"__implicit_prices__\", value: Some(String(\"from_cost\")) }])",
;     "date=2013-04-06, currency=HOOL, price=560 USD, meta=Meta([MetaKeyValuePair { key: \"__implicit_prices__\", value: Some(String(\"from_price\")) }])",
; ]
